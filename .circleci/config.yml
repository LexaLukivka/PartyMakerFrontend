# Javascript Node CircleCI 2.0 configuration file
#
# Check https://circleci.com/docs/2.0/language-javascript/ for more details
#
version: 2

dependencies:
  pre:
  - cp ./.ssh/* ~/.ssh
  - chmod 600 ~/.ssh/id_rsa*

jobs:
  build:
    docker:
    - image: circleci/node:10.6
    working_directory: ~/repo
    steps:
    #    - checkout

    - add_ssh_keys:
        fingerprints:
        - "31:95:f7:38:49:bc:b8:8d:f0:f9:5d:78:02:19:87:7c"
    #
    #    - restore_cache:
    #        keys:
    #        - v1-dependencies-{{ checksum "package.json" }}
    #        - v1-dependencies-
    #
    #    - run: yarn install
    #
    #    - save_cache:
    #        paths:
    #        - node_modules
    #        key: v1-dependencies-{{ checksum "package.json" }}
    #
    #    - run: yarn build

    - deploy:
        name: digital-ocean
        command: ssh -v -o "StrictHostKeyChecking no" dev@partymaker.zp.ua "cd ~/home/dev/partymaker/frontend; ./build.sh"
